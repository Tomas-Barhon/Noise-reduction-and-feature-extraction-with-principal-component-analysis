\chapter{Data}
\label{chap:three}

Compared to traditional financial data cryptocurrency data tend to be easier
to obtain. However, many data providers have already identified the bussiness 
potential of selling advanced data and have started to monetize them. However,
since some
websites monetize only their APIs we could improvize and obtain data from 
multiple sources and merge them to get to our desired dataset size. We have
desired to use as many relevant variables as possible and we build on
an existing research in the field.
Our dataset can be split into 2 main categories and 4 subcategories.
We utilize the data that describe the overall market trends in the traditional
sense. These data were mostly obtained from \textbf{\href{https://fred.stlouisfed.org/}{https://fred.stlouisfed.org/}}
and from the 
\textbf{\href{https://finance.yahoo.com/markets/}{https://finance.yahoo.com/markets/}} API.
To balance fundamental indicators with speculative side we used \textbf{\href{https://trends.google.com/trends/}{Google Trends}}
and \textbf{\href{https://pageviews.wmcloud.org/}{Wikipedia Page Views}} 
that act as a proxy for market attention about cryptocurrencies in general 
and should help us to model the market hype periods. These explanatory
variables are then used to forecast the price or returns of the specific cryptocurrency
of interest lagged back in time.

\begin{figure}[!h]
    \centering
    \caption{Dataset Variables Overview}
        \includegraphics[width=1\textwidth]{Figures/dataset_description.drawio.pdf}
    \label{fig:dataset_description}
\end{figure}


The data were collected between December 2023 to February 2024 varying 
based on
the different sources but they are further shortened to utilize the most
overlapping region between data sources for each unique cryptocurrency.
This results in a time series from 17.9.2014 to 1.11.2022 for Bitcoin, 4.2.2016
to 27.7.2022 for Ethereum ensuring that the end of the series is 
before the change to proof-of-stake algorithm and series from 17.9.2014 to 1.11.2022
for Litecoin. The shifted versions of the datasets are of variable length based
on the forecasting horizon. 
\section{Cryptocurrency Specific Technical Data}

Despite the fact, that we have framed this data as fundamental/technical 
we should acknowledge that fundamental in our case stands far from its 
traditional meaning. They are fundamental in a way that they 
are the typical data researchers and practitioners employ to model cryptocurrencies
and that they objectively describe the system.
However, as the fundamental factor is very limited in this case it only makes sense
for the typical variables such as capitalization, volatility, hashrate and others.
But we also used a lot of technical variables that are derived from these fundamental
variables or the price itself. These help to identify trends in certain 
variables from pure mathematical transformation of the original series. 
All of these data were collected from \textbf{\href{https://coinmetrics.io/}{coinmetrics.io}}
and further processed by our pipeline.


We incorporate many variables describing specific technical characteristics of the network. Starting with number of active addresses
which acts as a measure of user activity on a particular day that is a cruical parameter potentially capturing the strength of 
bull or bear market behaviour. However, it does not reflect the direction itself. The difficulty of the network is
adjusted dynamically to counteract the changes in the mining power and thus act as a proxy for current mining power of the network or the current efforts of the miners. 
The size of the block is another characteristic of the network describing the size of the block (in bytes) and has been steadily increasing overtime
with significant fluctuation that depend on many other changes in the network. Hashrate is a measure of how
fast do the miners solve the hash for one block. In the long term the mean hashrate should be proportional to the difficulty at least that is how the 
\ac{BTC} protocol was designed however there are some fluctuation in the short term as the difficulty is adjusted every 2016 blocks 
to match the average hashrate over that period.


Other variables focus on the economics of the currency and model the market behaviour not the network itself. 
Beginning with traditional market signals such as capitalization indicating the overall price of all coins and volatility of returns 
as a standart deviation of log-returns. Furthermore, we employ many other variables about the price of fees 
provided by the users, revenues of the miners, distribution of wealth in the network and the number of transactions for that interval.


Following is the list of technical variables on the example of \ac{BTC}. The definitions were taken
directly from \textbf{\href{https://charts.coinmetrics.io/crypto-data/}{coinmetrics.io}} to avoid any misconceptions:

\begin{itemize}
    \item \textit{BTC / Addresses, active, count} - The sum count of unique addresses that were active in the network (either as a recipient or originator of a ledger change) that interval. All parties in a ledger change action (recipients and originators) are counted. Individual addresses are not double-counted if previously active.
    \item \textit{BTC / NVT, adjusted, 90d MA} - The ratio of the network value (or market capitalization, current supply) to the 90-day moving average of the adjusted transfer value. Also referred to as NVT.
    \item \textit{BTC / NVT, adjusted, free float,  90d MA} - The ratio of the free float network value (or market capitalization, free float) to the 90-day moving average of the adjusted transfer value.
    \item \textit{BTC / NVT, adjusted} - The ratio of the network value (or market capitalization, current supply) divided by the adjusted transfer value. Also referred to as NVT.
    \item \textit{BTC / NVT, adjusted, free float} - The ratio of the free float network value (or market capitalization, free float) divided by the adjusted transfer value. Also referred to as FFNVT.
    \item \textit{BTC / Flow, in, to exchanges, USD} - The sum USD value sent to exchanges that interval, excluding exchange to exchange activity.
    \item \textit{BTC / Flow, out, from exchanges, USD} - The sum USD value withdrawn from exchanges that interval, excluding exchange to exchange activity.
    \item \textit{BTC / Fees, transaction, mean, USD} - The USD value of the mean fee per transaction that interval.
    \item \textit{BTC / Fees, transaction, median, USD} - The USD value of the median fee per transaction that interval.
    \item \textit{BTC / Fees, total, USD} - The sum USD value of all fees paid by transactors that interval. Fees do not include new issuance.
    \item \textit{BTC / Miner revenue, USD} - The USD value of the mean miner reward per estimated hash unit performed during the period, also known as hashprice. The unit of hashpower measurement depends on the protocol.
    \item \textit{BTC / Capitalization, market, free float, USD} - The ratio of the free float market capitalization to the sum realized USD value of the current supply.
    \item \textit{BTC / Capitalization, realized, USD} - The sum USD value based on the USD closing price on the day that a native unit last moved (i.e., last transacted) for all native units.
    \item \textit{BTC / Capitalization, market, current supply, USD} - The sum USD value of the current supply. Also referred to as network value or market capitalization.
    \item \textit{BTC / Capitalization, market, estimated supply, USD} - The sum USD value of the estimated supply in circulation. Also referred to as network value or market capitalization.
    \item \textit{BTC / Volatility, daily returns, 30d} - The 30D volatility, measured as the standard deviation of the natural log of daily returns over the past 30 days.
    \item \textit{BTC / Volatility, daily returns, 180d} - The 180D volatility, measured as the standard deviation of the natural log of daily returns over the past 180 days.
    \item \textit{BTC / Difficulty, last} - The difficulty of the last block in the interval. Difficulty represents how hard it is to find a hash that meets the protocol-designated requirement (i.e., the difficulty of finding a new block) that day. The requirement is unique to each applicable cryptocurrency protocol. Difficulty is adjusted periodically by the protocol as a function of how much hashing power is being deployed by miners.
    \item \textit{BTC / Difficulty, mean} - The mean difficulty of finding a hash that meets the protocol-designated requirement (i.e., the difficulty of finding a new block) that interval. The requirement is unique to each applicable cryptocurrency protocol. Difficulty is adjusted periodically by the protocol as a function of how much hashing power is being deployed by miners.
    \item \textit{BTC / Hash rate, mean} - The mean rate at which miners are solving hashes that interval. Hash rate is the speed at which computations are being completed across all miners in the network. The unit of measurement varies depending on the protocol.
    \item \textit{BTC / Hash rate, mean, 30d} - The mean rate at which miners are solving hashes over the last 30 days. Hash rate is the speed at which computations are being completed across all miners in the network. The unit of measurement varies depending on the protocol
    \item \textit{BTC / Revenue, per hash unit, USD} - The USD value of the mean miner reward per estimated hash unit performed during the period, also known as hashprice. The unit of hashpower measurement depends on the protocol.
    \item \textit{BTC / Supply, Miner, held by all mining entities, USD} - The sum of the balances of all mining entities in USD. A mining entity is defined as an address that has been credited from a transaction debiting the 'FEES' or 'ISSUANCE' accounts.
    \item \textit{BTC / Block, size, mean, bytes} - The mean size (in bytes) of all blocks created that day.
    \item \textit{BTC / Block, weight, mean} - The mean weight of all blocks created that day. Weight is a dimensionless measure of a block’s “size”. It is only applicable for chains that use SegWit (segregated witness).
    \item \textit{BTC / Issuance, continuous, percent, daily} - The percentage of new native units (continuous) issued over that interval divided by the current supply at the end of that interval. Also referred to as the daily inflation rate.
    \item \textit{BTC / Network distribution factor} - The ratio of supply held by addresses with at least one ten-thousandth of the current supply of native units to the current supply.
    \item \textit{BTC / Transactions, count} - The sum count of transactions that interval. Transactions represent a bundle of intended actions to alter the ledger initiated by a user (human or machine). Transactions are counted whether they execute or not and whether they result in the transfer of native units or not (a transaction can result in no, one, or many transfers). Changes to the ledger mandated by the protocol (and not by a user) or post-launch new issuance issued by a founder or controlling entity are not included here.
    \item \textit{BTC / Transactions, transfers, count} - The sum count of transfers that interval. Transfers represent movements of native units from one ledger entity to another distinct ledger entity. Only transfers that are the result of a transaction and that have a positive (non-zero) value are counted.
    \item \textit{BTC / Transactions, transfers, value, mean, USD} - The sum USD value of native units transferred divided by the count of transfers (i.e., the mean size in USD of a transfer) between distinct addresses that interval.
\end{itemize}


The datasets for Ethereum and Litecoin look similar with the exception of a few variables missing,
look at (\autoref{ethereum:missing}, \autoref{litecoin:missing}):

\begin{figure}[!htbp]
    \begin{center}
    \caption{Ethereum missing variables}\label{ethereum:missing}
    \begin{boxeditemize}
        \item \textit{Hash rate, mean, 30d}
        \item \textit{Supply, Miner, held by all mining entities, USD}
        \item \textit{Block, weight, mean}
    \end{boxeditemize}
    \end{center}
    \end{figure}

    \begin{figure}[!htbp]
        \begin{center}
        \caption{Litecoin missing variables}\label{litecoin:missing}
        \begin{boxeditemize}
            \item \textit{Hash rate, mean, 30d}
            \item \textit{Supply, Miner, held by all mining entities, USD}
            \item \textit{Flow, in, to exchanges, USD}
            \item \textit{Flow, out, from exchanges, USD}
            \item \textit{Revenue, per hash unit, USD}
        \end{boxeditemize}
        \end{center}
        \end{figure}


\section{Macroeconomical Data}

As the macroeconomical condition is a cruical factor for investor behaviour 
we decided to include relevant variables that might deliver valuable
insights. We utilize five macroeconomical indicators that affect invesment choices.
Real Gross Domestic product of the United States represents the overall
growth trend of the largest economy in the world with closely related real
gross domestic product per capita telling more about individual resouces which
gives a more complex picture of the state of the US economy despite the 
fact that americans are not the main cryptocurrency investors by nation.
Furthermore we incorporate Consumer Price Index in the United States that
acts as an inflationary measure to capture the spurious correlation between 
prices of USD and BTC-USD exchange rate. M2 base acts as a measure
of dollar liquidity in the circulation. Lastly, the USD-EUR exchange rate
can be thought of as a market state information or its returns as an 
opportunity costs for potential investors. To further adress the problem of spurious
correlation and add the information about growth of other markets we include
various closing prices and other measures of the stock market and other 
investment opportunities. 


Following is the full description of the macroeconomical
variables used:

\begin{itemize}
    \item \textit{Close\_DJI} - Dow Jones Industrial Average
    \item \textit{Close\_GSPC} - S\&P 500
    \item \textit{Close\_GC=F} - Gold Futures
    \item \textit{Close\_VIX} - CBOE Volatility Index
    \item \textit{Close\_IXIC} - NASDAQ Composite
    \item \textit{Close\_SMH} - VanEck Semiconductor ETF
    \item \textit{Close\_VGT} - Vanguard Information Technology Index Fund
    \item \textit{Close\_XSD} - SPDR S\&P Semiconductor ETF
    \item \textit{Close\_IYW} - iShares U.S. Technology ETF
    \item \textit{Close\_FTEC} - Fidelity MSCI Information Technology Index ETF
    \item \textit{Close\_IGV} - iShares Expanded Tech-Software Sector ETF
    \item \textit{Close\_QQQ} - Invesco QQQ Trust
    \item \textit{RGDP\_US} - Real Gross Domestic Product of the United States
    \item \textit{RGDP\_PC\_US} - Real Gross Domestic Product per capita 
    of the United States
    \item \textit{CPI\_US} - Consumer Price Index: All Items: Total for United States
    \item \textit{M2\_US} - M2 Base US
    \item \textit{USD\_EUR\_rate} - U.S. Dollars to Euro Spot Exchange Rate
\end{itemize}


\section{Web Search Data}

As mentioned earlier following many other researchers we aimed to 
obtain a proxy for the market
attention. We specifically used \textbf{\href{https://pageviews.wmcloud.org/}{Wikipedia Page Views}}
to get the page views for Wikipedia pages: Bitcoin, Ethereum, Litecoin and 
Cryptocurrency and use them respectively for each coin dataset combining 
the overall Cryptocurrency views with the specific currency. Similarly we 
hoped to obtain similar data from 
\textbf{\href{https://trends.google.com/trends/}{Google Trends}} but they
turned out to be quite cumbersome to use. As \cite{West2020a} mentioned 
there are three main obstacles when using Google Trends. Firstly, the scale
is always normalized into the range 0-100 based on the selected region and time.
Secondly, this implicitly means that the results are rounded to integers and thus 
loosing a lot of precision. Lastly, there is a limit of 5 queries that you can 
use at a time. This not only means that you cannot compare more search terms 
but it also means that when there are over five variations how the term might
be searched for one cannot do that effectively. Another problem, 
that we faced is that the data can be obtained only in weekly granularity
for longer periods and thus needs to be interpolated to daily which 
most likely sacrifices a lot of interesting dynamics on the daily level which
is significant regarding the volatility of cryptocurrencies. 
These reasons, except the weekly sampling frequency, were solved in 
the \textbf{\href{https://github.com/epfl-dlab/GoogleTrendsAnchorBank}{g-tab}}
Python library, created by \cite{West2020a}, which uses a 
two step query sampling process that 
estimates the searches on a universally common scale with floating precision and allows 
us to use as many word formulation as needed. We would then sum the popularity
for each word formulation that is related to the same thing. We acknowledge
that there is a risk that we ommited some word formulations but hopefully
we covered all the significant ones.


Following is the list of the variables from this section and their word forms
for Google Trends:
https://cs.wikipedia.org/wiki/Bitcoin
\begin{itemize}
    \item \textit{Wiki\_btc\_search} - Wiki pageviews for \textbf{\href{https://cs.wikipedia.org/wiki/Bitcoin}{Bitcoin}}
    \item \textit{Wiki\_eth\_search} - Wiki pageviews for \textbf{\href{https://cs.wikipedia.org/wiki/Ethereum}{Ethereum}}
    \item \textit{Wiki\_ltc\_search} - Wiki pageviews for \textbf{\href{https://cs.wikipedia.org/wiki/Litecoin}{Litecoin}}
    \item \textit{Wiki\_crypto\_search} - Wiki pageviews for \textbf{\href{https://en.wikipedia.org/wiki/Cryptocurrency}{Cryptocurrency}}
    \item \textit{Google\_btc\_search} - Google Trends summed from terms: \textit{Bitcoin, bitcoin, BTC}
    \item \textit{Google\_eth\_search} - Google Trends summed from terms: \textit{Ethereum, ethereum, ether, ETH}
    \item \textit{Google\_ltc\_search} - Google Trends summed from terms: \textit{Litecoin, litecoin, LTC}
    \item \textit{Google\_crypto\_search} - Google Trends summed from terms: \textit{Cryptocurrency, cryptocurrency, Cryptocurrencies, cryptocurrencies, crypto, Crypto}
\end{itemize}


\section{Preprocessing}

resampling weakly and monthly to daily !!
- mention something like that we use always last data as the data for the current month

forward filling ensures that we do not cheat and use data from the future !!


"""
Fills missing data with zeros where the data was not yet collected and 
forward fills all the exchange data that are not traded on the weekends 
(pushing values from friday to saturday and sunday mostly).
Cuts ethereum time series before at the point of switching to P-o-s consensus.

"""

inspecting missing values




merging on date




Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text text text text text text. Text text  \citet{Haufler2006}.

Text text text text text text text text text text text text text text text. Text text text text text text text \cite[see, \latinfont{inter alia},][pg.~10]{Haaparanta1996}. 



Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Politicians usualy like inward \ac{BTC} and an \ac{MNC} appreciates \ac{FDI} subsidies. Are \acp{MNC} greedy?



To achieve compatibility with PDF/A 2u, your file must not include links to external fonts, audio, video, or scripts. On the other hand, your file must declare each color environment you use, it must include all the pictures/figures either in jpeg or PDF/A 2u format, used fonts compliant under Unicode (your file cannot use any external fonts), and it must include meta-data in XMP format.


Most troubleshooting comes from the conversion of figures to compliant formats. You can convert from simple PDF using Adobe Acrobat:



But most of the vector graphics gets distorted to lower quality in Adobe (like pictures in pdfs generated from Stata, unless jpeg is sufficient for you). You can also use GhostScript, the conversion tool is provided by courtesy of the Faculty of Mathematics and Physics at

\vspace{0.5cm}
\textbf{\href{https://kam.mff.cuni.cz/pdfix/}{https://kam.mff.cuni.cz/pdfix/}}
\vspace{0.5cm}

Text text text text text text.\footnote{Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text.} Font of Latin phrases should be consistent: Furthermore, there is no \latinfont{ex post} price effect, all things being equal (\latinfont{ceteris paribus}). This is \latinfont{per se} truth.

\begin{figure}[!htbp]
\begin{center}
\caption{Market equilibrium}
\label{fig:supply}
\includegraphics[width=60mm]{Figures/supplydemand}
\end{center}\vspace{-0.5cm}
\begin{source}\cite{Haufler2006}.\end{source}
\end{figure}

Look at the \autoref{fig:supply}. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text.





If you use Stata, you might want to check the \texttt{sutex}, \texttt{outtable}, \texttt{outtex}, and \texttt{estout} tools, which help you with exporting Stata tables to \LaTeX{}.


\begin{table}[!htbp]
\begin{center}
	\caption[Calibration table]{Model's predictions}\label{tab:values}
\begin{tabular}{lrrrrrrrrrr}
\toprule
\textit{Case} &        $Y_1$ &        $Y_2$ &  $\tau_1$ &  $\tau_2$ &          $a$ &          $n$\\
\midrule
CR---Slovakia &       10.9 &         10 &       0.24 &       0.19 &          1,000 &       2.16\\

CR---Poland &       13.3 &         12 &       0.24 &       0.19 &          1,000 &       0.38\\

CR---Hungary &       10.4 &          8 &       0.24 &       0.16 &          1,000 &        1.10\\
\bottomrule
\end{tabular}  
\end{center}
\begin{source} If the source is author himself (like a calculation output), this line is redundant.\end{source}
\end{table}

Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text.



Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text. Let us make a box:

\begin{figure}[!htbp]
\begin{center}
\caption{Boxy's example}\label{box:values}
\begin{boxeditemize}
	\item Welcome to Boxy paragraph. 
We sincerely hope you will
all enjoy the show.
	\item
Welcome to Boxy paragraph.
We sincerely hope you will
all enjoy the show.
	\item 
Welcome to Boxy paragraph.
We sincerely hope you will
all enjoy the show.
\end{boxeditemize}
\end{center}
\begin{source}\cite{Haaparanta1996}\end{source}
\end{figure}

Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text.


\begin{defin}[My original definition]\label{de:definice1}
This is a definition.
\end{defin}

\begin{ass}[My realistic assumption]\label{as:predpoklad1}
This is an assumption.
\end{ass}

\begin{prop}[My clever proposition]\label{pr:veta1}
This is a proposition.
\end{prop}

\begin{lemma}[My useful lemma]\label{le:lemma1}
This is a lemma.
\end{lemma}

\begin{exam}\label{ex:priklad1}
This is an example.
\end{exam}

\begin{proof}
This is a proof.
\end{proof}



Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text.

    \[ U = \underbrace{\int_0^{\infty} \frac{1}{1-\sigma}\left(C^{1-\sigma} -1 \right) e^{-\rho t} \ud t}_\text{meaning of life} \]


Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text.
\begin{equation}\label{eq:rovnice1}
    U = \int_0^{\infty} \overbrace{ \frac{1}{1-\sigma}\left(C^{1-\sigma} -1 \right)}^\text{instantaneous utility} e^{-\rho t} \ud t
\end{equation}


Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text.

\begin{equation}\label{eq:rovnice2}
    \mat{A} = \mat{B} + \mat{C}
\end{equation}


\begin{itemize}
    \item to literature~\citep[pg.~10]{Bjorvatn2006} 	
            or~\citet[pg.~10]{Haufler2006},
    \item to~\autoref{fig:supply},														%or use \autoref
    \item see~\autoref{tab:values},
    \item to~\autoref{rovnice},
    \item to~\defref{de:definice1}, to~\proref{pr:veta1},
            \exaref{ex:priklad1}, 
    \item to equations like this: see~\eqref{eq:rovnice1}.
\end{itemize}


You can input a source code like this:
\begin{matlab}{.9\linewidth}{dgreen}
    omega = 1;
    syms zeta;
    jmn = [1 2\itemz*eta\itemo*mega omega^2];
    figure(1);
        for zeta = 1E-5 : 0.2 : 1+1E-12
            G = tf(omega^2,subs([1 2\itemz*eta\itemo*mega omega^2]));
            bode(G); hold on;
        end
    legend('\zeta = 0','\zeta = 0,2','\zeta = 0,4','\zeta = 0,6',');
\end{matlab}
Should you prefer a different font size, redefine file \texttt{Styles/Mystyle.sty}.


Usually you should not use the first person singular (I) in your text, write we instead. As a general recommendation, use the first person sparsely, sometimes it can be replaced by a phrase like ``This work presents \ldots.''

Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text \citep{Haufler2006}. Let us make two paragraphs:

\paragraph{Proin} Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text.
Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. And a subparagraph:
\subparagraph{Velit} Text text text text text text text text text text text text text text text. Text text text text text text text text text text. Text text text text text text. Text text text text text text text text text text. Text text text text text text text text text text.

